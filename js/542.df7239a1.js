"use strict";(self["webpackChunkvue_router"]=self["webpackChunkvue_router"]||[]).push([[542],{542:function(t,e,l){l.r(e),l.d(e,{default:function(){return dt}});var r=l(6252),d=l(3577),s=l(9963);const a=(0,r._)("h3",null,"訂單列表",-1),o={class:"table"},n=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"購買時間"),(0,r._)("th",{scope:"col"},"Email"),(0,r._)("th",{scope:"col"},"購買品項"),(0,r._)("th",{scope:"col"},"應付金額"),(0,r._)("th",{scope:"col"},"是否付款"),(0,r._)("th",{scope:"col"},"編輯")])],-1),i={class:"form-check form-switch"},u=["onUpdate:modelValue","id"],c=["for"],p={key:0},_={key:1},h={class:"btn-group",role:"group","aria-label":"Basic outlined example"},m=["onClick"],b=(0,r._)("button",{type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ",-1);function w(t,e,l,w,O,g){const f=(0,r.up)("LoadingOverlay"),y=(0,r.up)("OrderModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(f,{active:O.isLoading,"z-index":1e3},null,8,["active"]),a,(0,r._)("table",o,[n,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(O.orders,((e,l)=>((0,r.wg)(),(0,r.iD)("tr",{key:l},[(0,r._)("td",null,(0,d.zw)(t.$filters.date(e.create_at)),1),(0,r._)("td",null,(0,d.zw)(e.user.email),1),(0,r._)("td",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.products,((t,e)=>((0,r.wg)(),(0,r.iD)("ul",{class:"list-unstyled",key:e},[(0,r._)("li",null,(0,d.zw)(t.product.title)+"，數量："+(0,d.zw)(t.qty),1)])))),128))]),(0,r._)("td",null,(0,d.zw)(t.$filters.toThousandths(e.total)),1),(0,r._)("td",null,[(0,r._)("div",i,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t=>e.is_paid=t,class:"form-check-input",type:"checkbox",role:"switch",id:`paidState${e.id}`},null,8,u),[[s.e8,e.is_paid]]),(0,r._)("label",{class:"form-check-label",for:`paidState${e.id}`},[e.is_paid?((0,r.wg)(),(0,r.iD)("span",p,"已付款")):((0,r.wg)(),(0,r.iD)("span",_,"未付款"))],8,c)])]),(0,r._)("td",null,[(0,r._)("div",h,[(0,r._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:t=>g.openOrderModal(e)}," 檢視 ",8,m),b])])])))),128))])]),(0,r.Wm)(y,{ref:"orderModal",order:O.tempOrder,onUpdateOrder:g.updateOrder},null,8,["order","onUpdateOrder"])],64)}const O={class:"modal",tabindex:"-1",ref:"productModal"},g={class:"modal-dialog"},f={class:"modal-content"},y=(0,r._)("div",{class:"modal-header"},[(0,r._)("h5",{class:"modal-title"},"訂單細節"),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},v={class:"row"},z={class:"col-md-4"},D=(0,r._)("h4",null,"用戶資料",-1),$={class:"table"},x={key:0},M=(0,r._)("th",null,"姓名",-1),L=(0,r._)("th",null,"Email",-1),C=(0,r._)("th",null,"電話",-1),U=(0,r._)("th",null,"地址",-1),H={class:"col-md-8"},Y=(0,r._)("h4",null,"訂單細節",-1),K={class:"table"},V=(0,r._)("th",null,"訂單編號",-1),Z=(0,r._)("th",null,"下單時間",-1),q=(0,r._)("th",null,"付款時間",-1),E=(0,r._)("th",null,"付款狀態",-1),S={key:0,class:"text-success"},T={key:1,class:"text-muted"},W=(0,r._)("th",null,"總金額",-1),j=(0,r._)("h4",null,"選購商品",-1),B={class:"table"},A={class:"form-check"},F={class:"form-check-label",for:"flexCheckDefault"},G={key:0},I={key:1},J={class:"modal-footer"},N=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function P(t,e,l,a,o,n){return(0,r.wg)(),(0,r.iD)("div",O,[(0,r._)("div",g,[(0,r._)("div",f,[y,(0,r._)("div",k,[(0,r._)("div",v,[(0,r._)("div",z,[D,(0,r._)("table",$,[o.tempOrder.user?((0,r.wg)(),(0,r.iD)("tbody",x,[(0,r._)("tr",null,[M,(0,r._)("td",null,(0,d.zw)(o.tempOrder.user.name),1)]),(0,r._)("tr",null,[L,(0,r._)("td",null,(0,d.zw)(o.tempOrder.user.email),1)]),(0,r._)("tr",null,[C,(0,r._)("td",null,(0,d.zw)(o.tempOrder.user.tel),1)]),(0,r._)("tr",null,[U,(0,r._)("td",null,(0,d.zw)(o.tempOrder.user.address),1)])])):(0,r.kq)("",!0)])]),(0,r._)("div",H,[Y,(0,r._)("table",K,[(0,r._)("tbody",null,[(0,r._)("tr",null,[V,(0,r._)("td",null,(0,d.zw)(o.tempOrder.id),1)]),(0,r._)("tr",null,[Z,(0,r._)("td",null,(0,d.zw)(t.$filters.date(o.tempOrder.create_at)),1)]),(0,r._)("tr",null,[q,(0,r._)("td",null,(0,d.zw)(t.$filters.date(o.tempOrder.paid_date)),1)]),(0,r._)("tr",null,[E,(0,r._)("td",null,[o.tempOrder.is_paid?((0,r.wg)(),(0,r.iD)("strong",S,"已付款")):((0,r.wg)(),(0,r.iD)("span",T,"尚未付款"))])]),(0,r._)("tr",null,[W,(0,r._)("td",null,(0,d.zw)(t.$filters.toThousandths(o.tempOrder.total)),1)])])]),j,(0,r._)("table",B,[(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tempOrder.products,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e+123},[(0,r._)("td",null,(0,d.zw)(t.product.title),1),(0,r._)("td",null,(0,d.zw)(t.product.num)+" / "+(0,d.zw)(t.product.unit),1),(0,r._)("td",null,(0,d.zw)(t.total),1)])))),128))])]),(0,r._)("div",A,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=t=>o.tempOrder.is_paid=t)},null,512),[[s.e8,o.tempOrder.is_paid]]),(0,r._)("label",F,[o.tempOrder.is_paid?((0,r.wg)(),(0,r.iD)("span",G,"已付款")):((0,r.wg)(),(0,r.iD)("span",I,"未付款"))])])])])]),(0,r._)("div",J,[N,(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>n.emitUpdateOrder&&n.emitUpdateOrder(...t))}," 修改付款狀態 ")])])])],512)}var Q=l(2703),R={mixins:[Q.Z],props:{order:{type:Object,default(){return{}}}},data(){return{tempOrder:{}}},methods:{emitUpdateOrder(){this.$emit("update-order",this.tempOrder)}},watch:{order(){this.tempOrder=this.order}}},X=l(3744);const tt=(0,X.Z)(R,[["render",P]]);var et=tt,lt={components:{OrderModal:et},data(){return{orders:{},tempOrder:{},isLoading:!1}},methods:{getOrders(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/hsiaoi/admin/orders";this.$http.get(t).then((t=>{console.log(t),this.orders=t.data.orders,this.isLoading=!1})).catch((t=>{alert(t.response.data),this.isLoading=!1}))},openOrderModal(t){this.tempOrder={...t};const e=this.$refs.orderModal;e.openModal()},updateOrder(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/v2/api/hsiaoi/admin/order/${this.tempOrder.id}`,l={is_paid:t.is_paid};this.$http.put(e,{data:l}).then((t=>{alert(t.data.message),this.getOrders(),this.isLoading=!1;const e=this.$refs.orderModal;e.closeModal()})).catch((t=>{alert(t.response.message),this.isLoading=!1}))}},mounted(){this.getOrders()}};const rt=(0,X.Z)(lt,[["render",w]]);var dt=rt}}]);
//# sourceMappingURL=542.df7239a1.js.map