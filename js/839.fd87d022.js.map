{"version":3,"file":"js/839.fd87d022.js","mappings":"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","sources":["webpack://vue-router/./src/views/CartPage.vue","webpack://vue-router/./src/views/CartPage.vue?115c"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\" :z-indes=\"1000\"></LoadingOverlay>\n  <div class=\"container\">\n    <div>\n      <div class=\"d-flex justify-content-around w-50 mx-auto my-5\">\n        <div>\n          <div class=\"rounded-pill text-center order-shape mx-auto mb-1\">\n            <p class=\"pt-2\">1</p>\n          </div>\n          <p class=\"text-center fs-7\">填寫資料</p>\n        </div>\n\n        <div>\n          <div class=\"rounded-pill text-center order-shape-light mx-auto mb-1\">\n            <p class=\"pt-2\">2</p>\n          </div>\n          <p class=\"text-center fs-7\">確認訂單</p>\n        </div>\n\n        <div>\n          <div class=\"rounded-pill text-center order-shape-light mx-auto mb-1\">\n            <p class=\"pt-2\">3</p>\n          </div>\n          <p class=\"text-center fs-7\">購買完成</p>\n        </div>\n      </div>\n    </div>\n    <!-- 購物車內容 -->\n    <div class=\"table-cus\">\n      <h5\n        class=\"h5 bg-danger bg-gradient rounded-top p-3 text-white\"\n        style=\"--bs-bg-opacity: 0.5\"\n      >\n        購物車\n      </h5>\n      <div v-if=\"cartData.carts.length === 0\" class=\"text-center p-5\">\n        <p>購物車內沒有商品喔</p>\n        <router-link to=\"/products\"\n          ><button\n            type=\"button\"\n            class=\"btn btn-danger w-25 text-white bg-gradient\"\n          >\n            前往逛逛\n          </button></router-link\n        >\n      </div>\n      <div class=\"px-4\" v-else>\n        <table class=\"w-100 mt-4\" ref=\"table\">\n          <thead class=\"thead\">\n            <tr class=\"text-center\">\n              <th scope=\"col\" class=\"py-3\">商品資訊</th>\n              <th scope=\"col\">單件價格</th>\n\n              <!-- <th scope=\"col\">小計</th> -->\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody class=\"border-bottom\">\n            <tr\n              class=\"text-center\"\n              v-for=\"cart in cartData.carts\"\n              :key=\"cart.id\"\n            >\n              <td class=\"p-3\">\n                <div class=\"d-md-flex d-block align-items-center\">\n                  <img\n                    :src=\"cart.product.imageUrl\"\n                    :alt=\"cart.product.title\"\n                    class=\"cart-img me-3 rounded-3\"\n                  />\n                  <h6 class=\"mt-2 text-center\">{{ cart.product.title }}</h6>\n                </div>\n              </td>\n              <td>\n                <p v-if=\"cart.product.price === cart.product.origin_price\">\n                  NT$ {{ cart.product.price }}\n                </p>\n                <p v-else class=\"text-danger\">\n                  NT$ {{ cart.product.price }} <br />\n                  <del class=\"text-secondary fs-7\"\n                    >NT$ {{ cart.product.origin_price }}</del\n                  >\n                </p>\n\n                <select\n                  name=\"qty\"\n                  id=\"qty\"\n                  class=\"form-select w-75\"\n                  v-model=\"cart.qty\"\n                  @change=\"changeCart(cart)\"\n                >\n                  <option\n                    :value=\"num\"\n                    v-for=\"num in 20\"\n                    :key=\"`${cart.id} + ${num}`\"\n                  >\n                    {{ num }}\n                  </option>\n                </select>\n              </td>\n\n              <!-- <td>NT$ {{ `${cart.product.price * cart.qty}` }}</td> -->\n              <td>\n                <a href=\"#\" @click.prevent=\"deleteCart(cart.id)\"\n                  ><i class=\"bi bi-trash text-secondary fs-6\"></i\n                ></a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n        <!-- 優惠券與結帳金額 -->\n        <div class=\"row\">\n          <div class=\"col-6 mt-4\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-danger\"\n              @click=\"deleteAllCart\"\n            >\n              清空購物車\n            </button>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"mt-4\">\n              <div class=\"d-flex\">\n                <input\n                  type=\"text\"\n                  class=\"form-control w-75 rounded-0 rounded-start border-end-0\"\n                  placeholder=\"請輸入優惠碼\"\n                  v-model=\"coupon\"\n                />\n\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger w-25\"\n                  @click=\"useCoupon\"\n                >\n                  使用優惠券\n                </button>\n              </div>\n\n              <div class=\"mt-3\">\n                <div class=\"d-flex justify-content-between\">\n                  <p>商品小計</p>\n                  <p>NT$ {{ cartData.total }}</p>\n                </div>\n                <div class=\"d-flex justify-content-between\">\n                  <p>折抵金額</p>\n                  <p>\n                    - NT$\n                    {{ `${Math.ceil(cartData.total - cartData.final_total)}` }}\n                  </p>\n                </div>\n                <div class=\"d-flex justify-content-between mt-3\">\n                  <p>結帳金額</p>\n                  <p class=\"text-danger fs-5-5\">\n                    NT$ {{ `${Math.ceil(cartData.final_total)}` }}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 填寫資訊 -->\n    <div class=\"table-cus my-5\">\n      <h5\n        class=\"h5 bg-danger bg-gradient rounded-top p-3 text-white\"\n        style=\"--bs-bg-opacity: 0.5\"\n      >\n        填寫顧客資訊\n      </h5>\n      <div class=\"p-4\">\n        <VForm ref=\"form\" v-slot=\"{ errors }\" @submit=\"submitOrder\">\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\"\n              >姓名<span class=\"text-danger fs-5-5 ms-1\">*</span></label\n            >\n\n            <VField\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入收件人姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></VField>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\"\n              >Email<span class=\"text-danger fs-5-5 ms-1\">*</span></label\n            >\n            <VField\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></VField>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"phone\" class=\"form-label\"\n              >聯絡電話<span class=\"text-danger fs-5-5 ms-1\">*</span></label\n            >\n            <VField\n              id=\"phone\"\n              name=\"聯絡電話\"\n              type=\"tel\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['聯絡電話'] }\"\n              placeholder=\"請輸入聯絡電話\"\n              rules=\"required|min:8|max:10\"\n              v-model=\"form.user.tel\"\n            ></VField>\n            <ErrorMessage\n              name=\"聯絡電話\"\n              class=\"invalid-feedback\"\n            ></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\"\n              >收件地址<span class=\"text-danger fs-5-5 ms-1\">*</span></label\n            >\n            <VField\n              id=\"address\"\n              name=\"收件地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['收件地址'] }\"\n              placeholder=\"請輸入收件地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></VField>\n            <ErrorMessage\n              name=\"收件地址\"\n              class=\"invalid-feedback\"\n            ></ErrorMessage>\n          </div>\n          <!-- <div class=\"mb-3\">\n            <label for=\"pay\" class=\"form-label\">付款方式<span class=\"text-danger fs-5-5 ms-1\">*</span></label>\n            <VField\n              id=\"pay\"\n              name=\"付款方式\"\n              as=\"select\"\n              class=\"form-select\"\n              :class=\"{ 'is-invalid': errors['付款方式'] }\"\n              placeholder=\"請選擇付款方式\"\n              rules=\"required\"\n              v-model=\"pay\"\n            >\n              <option value=\"default\" selected disabled>請選擇付款方式</option>\n              <option value=\"ATM\">ATM 轉帳</option>\n              <option value=\"visa\">信用卡</option>\n              <option value=\"visa\">超商付款</option>\n            </VField>\n            <ErrorMessage\n              name=\"付款方式\"\n              class=\"invalid-feedback\"\n            ></ErrorMessage>\n          </div> -->\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n\n          <button\n            type=\"submit\"\n            class=\"btn btn-danger w-100\"\n            :disabled=\"\n              cartData.carts.length === 0 || Object.keys(errors).length > 0\n            \"\n          >\n            確認訂單\n          </button>\n        </VForm>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import emitter from '@/libs/emitter'\nexport default {\n  emits: ['emit-order'],\n  data() {\n    return {\n      cartData: {\n        carts: []\n      },\n      coupon: '',\n      isLoading: false,\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n          // pay: ''\n        },\n        message: ''\n      },\n      pay: 'default',\n      orderId: ''\n    }\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`\n      this.isLoading = true\n      this.$http\n        .get(url)\n        .then((res) => {\n          console.log(res)\n          this.cartData = res.data.data\n          this.isLoading = false\n        })\n        .catch((err) => {\n          alert(err.response)\n          this.isLoading = false\n        })\n    },\n    // 使用優惠券\n    useCoupon() {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/coupon`\n      const data = {\n        code: this.coupon\n      }\n\n      this.$http.post(url, { data: data }).then((res) => {\n        console.log(res)\n        alert(res.data.message)\n        this.getCart()\n      })\n    },\n    // 修改數量\n    changeCart(cart) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart/${cart.id}`\n      const data = {\n        product_id: cart.product.id,\n        qty: cart.qty\n      }\n      this.$http\n        .put(url, { data: data })\n        .then((res) => {\n          console.log(res)\n          alert(res.data.message)\n          this.isLoading = false\n        })\n        .catch((err) => {\n          alert(err.response)\n          this.isLoading = false\n        })\n    },\n    // 刪除購物車\n    deleteCart(id) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart/${id}`\n\n      this.$http\n        .delete(url)\n        .then((res) => {\n          console.log(res)\n          alert(res.data.message)\n          this.getCart()\n          this.isLoading = false\n        })\n        .catch((err) => {\n          alert(err.response)\n          this.isLoading = false\n        })\n    },\n    // 清空購物車\n    deleteAllCart() {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/carts`\n\n      this.$http\n        .delete(url)\n        .then((res) => {\n          console.log(res)\n          alert('已清空購物車')\n          this.getCart()\n        })\n        .catch((err) => {\n          alert(err.response)\n        })\n    },\n    // 送出訂單\n    submitOrder() {\n      const url = `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/order`\n      this.isLoading = true\n      const orderInfo = this.form\n\n      this.$http\n        .post(url, { data: orderInfo })\n        .then((res) => {\n          console.log(res)\n          alert(res.data.message)\n          this.$refs.form.resetForm()\n          this.isLoading = false\n          // 取得訂單 id ，為了跳轉到訂單確認頁面\n          this.orderId = res.data.orderId\n          this.$router.push(`/order/${this.orderId}`)\n          console.log(this.orderId)\n\n          // emit 傳訂單資料到 frontView，再從 frontView 去撈資料\n          //   emitter.emit('get-order', this.cartData)\n          //   this.$emit('emit-order', this.form)\n          //   emitter.emit('get-order', this.form)\n        })\n        .catch((err) => {\n          alert(err.response)\n          this.isLoading = false\n        })\n    }\n  },\n  watch: {\n    $route() {\n      this.getCart()\n    }\n  },\n  mounted() {\n    this.getCart()\n    console.log(this.cartData.carts.product_id)\n  }\n}\n</script>\n\n<style scoped>\n.order-shape {\n  background-color: #c18787;\n  color: #ffffff;\n  width: 45px;\n  height: 45px;\n}\n\n.order-shape-light {\n  background-color: #e3caca;\n  color: #ffffff;\n  width: 45px;\n  height: 45px;\n}\n\n.cart-img {\n  height: 150px;\n  width: 40%;\n  object-fit: cover;\n}\n\n@media (max-width: 768px) {\n  .cart-img {\n    width: 90%;\n    margin-right: 0px !important;\n  }\n}\n\n.table-cus {\n  background-color: #ffffff;\n  box-shadow: 2px 2px 10px 1px #eae7e7;\n}\n\n.thead {\n  border-bottom: 2px solid #e9e8e8;\n}\n</style>\n","import { render } from \"./CartPage.vue?vue&type=template&id=d186d1f4&scoped=true\"\nimport script from \"./CartPage.vue?vue&type=script&lang=js\"\nexport * from \"./CartPage.vue?vue&type=script&lang=js\"\n\nimport \"./CartPage.vue?vue&type=style&index=0&id=d186d1f4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/luoxiaoyin/Desktop/other/front end/Vue3 課程/homework/第八週作業/frontboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d186d1f4\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","type","ref","scope","_hoisted_23","for","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_2","_hoisted_4","carts","length","_createElementBlock","_hoisted_6","_component_router_link","to","_hoisted_7","_hoisted_10","_Fragment","_renderList","cart","key","id","src","product","imageUrl","alt","title","_toDisplayString","price","origin_price","_hoisted_16","_hoisted_18","name","qty","$event","onChange","$options","num","value","_hoisted_21","href","onClick","placeholder","_hoisted_32","total","_hoisted_34","Math","ceil","final_total","_hoisted_36","_hoisted_39","_component_VForm","onSubmit","errors","_hoisted_42","_component_VField","rules","user","_component_ErrorMessage","_hoisted_44","email","_hoisted_46","tel","_hoisted_48","address","_hoisted_50","cols","rows","message","disabled","Object","keys","_hoisted_51","emits","data","cartData","coupon","isLoading","form","pay","orderId","methods","getCart","url","this","$http","get","then","res","console","log","catch","err","alert","response","useCoupon","code","post","changeCart","product_id","put","deleteCart","delete","deleteAllCart","submitOrder","orderInfo","$refs","resetForm","$router","push","watch","$route","mounted","__exports__","render"],"sourceRoot":""}